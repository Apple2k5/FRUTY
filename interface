<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FRUTY ‚Äî Farmer App with Multi-language Audio</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter&display=swap" rel="stylesheet" />
  <style>
    /* Styles unchanged from your provided code */
    body {
      margin: 0;
      font-family: 'Inter', sans-serif;
      background: #f6fef6;
      color: #1b2a1f;
    }

    .app {
      max-width: 1000px;
      margin: auto;
      padding: 16px;
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px;
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, .1);
      flex-wrap: wrap;
      gap: 12px;
    }

    .logo {
      font-weight: 700;
      font-size: 20px;
      color: #27ae60;
      white-space: nowrap;
      user-select: none;
    }

    .lang-connect {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    #connectBtn {
      padding: 10px 16px;
      font-weight: 600;
      border: none;
      border-radius: 8px;
      background: #27ae60;
      color: #fff;
      cursor: pointer;
      user-select: none;
    }

    #lang-select {
      font-size: 16px;
      padding: 6px 12px;
      border-radius: 8px;
      border: 1px solid #ccc;
      cursor: pointer;
      min-width: 110px;
      user-select: none;
    }

    main {
      margin-top: 18px;
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 16px;
    }

    .card {
      background: #fff;
      padding: 16px;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, .08);
      margin-bottom: 12px;
      user-select: none;
    }

    .live-view {
      width: 100%;
      height: 330px;
      border-radius: 12px;
      object-fit: cover;
      border: 3px solid #eafaf1;
      background: #eafaf1;
      display: block;
      margin: auto;
    }

    .status-row {
      display: flex;
      justify-content: space-between;
      margin-top: 12px;
      gap: 12px;
      flex-wrap: wrap;
    }

    .status-block {
      background: #f0fdf4;
      padding: 10px 14px;
      border-radius: 10px;
      min-width: 100px;
      flex: 1 1 120px;
      text-align: center;
      color: #1b2a1f;
    }

    .status-block .title {
      font-weight: 600;
      font-size: 14px;
      color: #555;
      margin-bottom: 6px;
      user-select: none;
    }

    .status-block .value {
      font-weight: 700;
      font-size: 20px;
      color: #27ae60;
      user-select: none;
    }

    .actions-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
      margin-top: 12px;
    }

    .action-btn {
      background: #f9f9f9;
      padding: 16px;
      border-radius: 12px;
      font-weight: 700;
      font-size: 18px;
      color: #1b2a1f;
      cursor: pointer;
      user-select: none;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      transition: background-color 0.3s;
    }

    .action-btn:hover {
      background: #ecf1ec;
    }

    .alert {
      padding: 10px;
      border-radius: 12px;
      margin-bottom: 12px;
      font-weight: 700;
      font-size: 16px;
      color: #fff;
      display: flex;
      align-items: center;
      gap: 10px;
      user-select: none;
      cursor: default;
    }

    .alert.red {
      background-color: #c0392b;
      animation: blink-red 1.5s infinite;
    }

    @keyframes blink-red {
      0%,
      100% {
        filter: brightness(1);
      }

      50% {
        filter: brightness(0.6);
      }
    }

    .alert.yellow {
      background-color: #f39c12;
      animation: blink-yellow 2s infinite alternate;
      color: #000;
    }

    @keyframes blink-yellow {
      0% {
        background-color: #f39c12;
      }

      100% {
        background-color: #fff3bf;
      }
    }

    footer {
      margin-top: 18px;
      text-align: center;
      font-size: 13px;
      color: #777;
      user-select: none;
    }

    @media (max-width: 720px) {
      main {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>

<body>
  <div class="app" role="application">
    <header>
      <div class="logo" id="appName" tabindex="0">üå± FRUTY App</div>
      <div class="lang-connect">
        <button id="connectBtn" tabindex="0">üîó Connect Device</button>
        <select id="lang-select" aria-label="Select Language" tabindex="0">
          <option value="en">English</option>
          <option value="hi">Hindi</option>
          <option value="mr">Marathi</option>
          <option value="bn">Bengali</option>
          <option value="te">Telugu</option>
        </select>
      </div>
    </header>
    <main>
      <section>
        <div class="card" id="robotView" tabindex="0" role="button" aria-label="Field Robot View">
          <h3 id="liveViewTitle">ü§ñ Field Robot View</h3>
          <img src="http://192.168.0.186:8080/video" style="width:100%;height:330px;border-radius:12px;">
          <div id="robot-location">üìç North Plot</div>
        </div>
        <div class="card" id="fieldStatus" tabindex="0" role="button" aria-label="Field Status">
          <h3 id="fieldStatusTitle">üåæ Field Status</h3>
          <div class="status-row">
            <div class="status-block">
              <div class="title" id="pestsTitle">üåø Pests</div>
              <div class="value" id="pestsValue">None</div>
            </div>
            <div class="status-block">
              <div class="title" id="moistureTitle">üíß Moisture</div>
              <div class="value" id="moistureValue">62%</div>
            </div>
            <div class="status-block">
              <div class="title" id="phTitle">‚öó PH</div>
              <div class="value" id="phValue">6.4</div>
            </div>
            <div class="status-block">
              <div class="title" id="nutrientsTitle">üå± Nutrients</div>
              <div class="value" id="nutrientsValue">Good</div>
            </div>
          </div>
        </div>
        <div class="card" id="cropSuggestions" tabindex="0" role="button" aria-label="Crop Suggestions">
          <h3 id="cropSugTitle">üåæ Crop Suggestions</h3>
          <p id="cropSugText">Recommended: Maize, Wheat, and Barley</p>
        </div>
        <div class="card" id="chargingInfo" tabindex="0" role="button" aria-label="Charging Status">
          <h3 id="chargingTitle">üîã FRUTY Charging Status</h3>
          <p id="chargingStatus">Battery at 75%, charging</p>
        </div>
        <div class="card" id="actionsGroup" role="group" aria-label="Farmer Actions">
          <h3 id="actionsTitle">‚ö° Actions</h3>
          <button class="action-btn" id="checkPestsBtn" tabindex="0" aria-label="Check Pests">üêõ Check Pests</button>
          <button class="action-btn" id="removeWeedsBtn" tabindex="0" aria-label="Remove Weeds">üåø Remove Weeds</button>
          <button class="action-btn" id="testSoilBtn" tabindex="0" aria-label="Test Soil">üß™ Test Soil</button>
          <button class="action-btn" id="irrigateBtn" tabindex="0" aria-label="Irrigate">üö∞ Irrigate</button>
        </div>
      </section>
      <aside>
        <div class="card" aria-label="Alerts and Suggestions">
          <h3 id="alertsTitle">üö® Alerts</h3>
          <div id="snakeAlert" class="alert red blink" tabindex="0" aria-live="assertive" aria-atomic="true" role="alert">
            üêç Snake detected ‚Äî North Plot
          </div>
          <div id="weedsAlert" class="alert yellow blink" tabindex="0" aria-live="polite" role="alert">
            üåø High weed growth ‚Äî Field B
          </div>
          <h3 id="suggestionsTitle">üå± Suggestions</h3>
          <p id="phAdvice">Soil PH 6.4 ‚Äî Apply Potassium Fertilizer</p>
        </div>
      </aside>
    </main>
    <footer tabindex="0">FRUTY Farmers App ‚Ä¢ Demo</footer>

    <script>
      // Add event listener for Check Pests button
      document.addEventListener('DOMContentLoaded', function() {
        const checkPestsBtn = document.getElementById('checkPestsBtn');
        
        checkPestsBtn.addEventListener('click', async function() {
          try {
            const response = await fetch('/check_pests');
            const data = await response.json();
            
            // Update the pests value in the UI
            document.getElementById('pestsValue').textContent = data.pest;
            
            // Optional: Show success message
            console.log('Pest check completed:', data);
          } catch (error) {
            console.error('Error checking pests:', error);
            document.getElementById('pestsValue').textContent = 'Error';
          }
        });
      });

      const translations = {
        en: {
          appName: "üå± FRUTY App",
          connectBtn: "üîó Connect Device",
          liveViewTitle: "ü§ñ Field Robot View",
          robotLocation: "üìç North Plot",
          fieldStatusTitle: "üåæ Field Status",
          pestsTitle: "üåø Pests",
          moistureTitle: "üíß Moisture",
          phTitle: "‚öó PH",
          nutrientsTitle: "üå± Nutrients",
          pestsValue: "None",
          nutrientsValue: "Good",
          cropSugTitle: "üåæ Crop Suggestions",
          cropSugText: "Recommended: Maize, Wheat, and Barley",
          chargingTitle: "üîã FRUTY Charging Status",
          chargingStatus: "Battery at 75%, charging",
          actionsTitle: "‚ö° Actions",
          checkPestsBtn: "üêõ Check Pests",
          removeWeedsBtn: "üåø Remove Weeds",
          testSoilBtn: "üß™ Test Soil",
          irrigateBtn: "üö∞ Irrigate",
          alertsTitle: "üö® Alerts",
          snakeAlert: "üêç Snake detected ‚Äî North Plot",
          weedsAlert: "üåø High weed growth ‚Äî Field B",
          suggestionsTitle: "üå± Suggestions",
          phAdvice: "Soil PH 6.4 ‚Äî Apply Potassium Fertilizer",
          footer: "FRUTY Farmers App ‚Ä¢ Demo"
        },
        hi: {
          appName: "üå± FRUTY ‡§ê‡§™",
          connectBtn: "üîó ‡§°‡§ø‡§µ‡§æ‡§á‡§∏ ‡§ï‡§®‡•á‡§ï‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç",
          liveViewTitle: "ü§ñ ‡§´‡•Ä‡§≤‡•ç‡§° ‡§∞‡•ã‡§¨‡•ã‡§ü ‡§¶‡•É‡§∂‡•ç‡§Ø",
          robotLocation: "üìç ‡§â‡§§‡•ç‡§§‡§∞ ‡§™‡•ç‡§≤‡•â‡§ü",
          fieldStatusTitle: "üåæ ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞ ‡§ï‡•Ä ‡§∏‡•ç‡§•‡§ø‡§§‡§ø",
          pestsTitle: "üåø ‡§ï‡•Ä‡§ü",
          moistureTitle: "üíß ‡§®‡§Æ‡•Ä",
          phTitle: "‚öó ‡§™‡•Ä‡§è‡§ö",
          nutrientsTitle: "üå± ‡§™‡•ã‡§∑‡§ï ‡§§‡§§‡•ç‡§µ",
          pestsValue: "‡§ï‡•ã‡§à ‡§®‡§π‡•Ä‡§Ç",
          nutrientsValue: "‡§Ö‡§ö‡•ç‡§õ‡§æ",
          cropSugTitle: "üåæ ‡§´‡§∏‡§≤ ‡§∏‡•Å‡§ù‡§æ‡§µ",
          cropSugText: "‡§Ö‡§®‡•Å‡§∂‡§Ç‡§∏‡§ø‡§§: ‡§Æ‡§ï‡•ç‡§ï‡§æ, ‡§ó‡•á‡§π‡•Ç‡§Ç, ‡§î‡§∞ ‡§ú‡•å",
          chargingTitle: "üîã ‡§´‡•ç‡§∞‡•Ç‡§ü‡•Ä ‡§ö‡§æ‡§∞‡•ç‡§ú ‡§∏‡•ç‡§•‡§ø‡§§‡§ø",
          chargingStatus: "‡§¨‡•à‡§ü‡§∞‡•Ä 75% ‡§™‡§∞, ‡§ö‡§æ‡§∞‡•ç‡§ú ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à",
          actionsTitle: "‚ö° ‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ‡§è‡§Ç",
          checkPestsBtn: "üêõ ‡§ï‡•Ä‡§ü ‡§ú‡§æ‡§Ç‡§ö‡•á‡§Ç",
          removeWeedsBtn: "üåø ‡§ñ‡§∞‡§™‡§§‡§µ‡§æ‡§∞ ‡§π‡§ü‡§æ‡§è‡§Ç",
          testSoilBtn: "üß™ ‡§Æ‡§ø‡§ü‡•ç‡§ü‡•Ä ‡§ú‡§æ‡§Ç‡§ö‡•á‡§Ç",
          irrigateBtn: "üö∞ ‡§∏‡§ø‡§Ç‡§ö‡§æ‡§à ‡§ï‡§∞‡•á‡§Ç",
          alertsTitle: "üö® ‡§Ö‡§≤‡§∞‡•ç‡§ü",
          snakeAlert: "üêç ‡§∏‡§æ‡§Å‡§™ ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï‡§ø‡§§ ‚Äî ‡§â‡§§‡•ç‡§§‡§∞ ‡§™‡•ç‡§≤‡•â‡§ü",
          weedsAlert: "üåø ‡§Ö‡§ß‡§ø‡§ï ‡§ñ‡§∞‡§™‡§§‡§µ‡§æ‡§∞ ‚Äî ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞ ‡§¨‡•Ä",
          suggestionsTitle: "üå± ‡§∏‡•Å‡§ù‡§æ‡§µ",
          phAdvice: "‡§Æ‡•É‡§¶‡§æ ‡§ï‡§æ ‡§™‡•Ä‡§è‡§ö 6.4 ‚Äî ‡§™‡•ã‡§ü‡§æ‡§∂ ‡§â‡§∞‡•ç‡§µ‡§∞‡§ï ‡§°‡§æ‡§≤‡•á‡§Ç",
          footer: "FRUTY ‡§ï‡§ø‡§∏‡§æ‡§®‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ê‡§™ ‚Ä¢ ‡§°‡•á‡§Æ‡•ã"
        },
        mr: {
          appName: "üå± FRUTY ‡•≤‡§™",
          connectBtn: "üîó ‡§°‡§ø‡§µ‡•ç‡§π‡§æ‡§á‡§∏ ‡§ú‡•ã‡§°‡§æ",
          liveViewTitle: "ü§ñ ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡§æ‡§µ‡§∞‡•Ä‡§≤ ‡§∞‡•ã‡§¨‡•ã‡§ü",
          robotLocation: "üìç ‡§â‡§§‡•ç‡§§‡§∞ ‡§™‡•ç‡§≤‡•â‡§ü",
          fieldStatusTitle: "üåæ ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞ ‡§∏‡•ç‡§•‡§ø‡§§‡•Ä",
          pestsTitle: "üåø ‡§ï‡§ø‡§°‡•Ä",
          moistureTitle: "üíß ‡§ì‡§≤‡§æ‡§µ‡§æ",
          phTitle: "‚öó ‡§™‡•Ä‡§è‡§ö",
          nutrientsTitle: "üå± ‡§™‡•ã‡§∑‡§ï ‡§§‡§§‡•ç‡§µ",
          pestsValue: "‡§®‡§æ‡§π‡•Ä",
          nutrientsValue: "‡§õ‡§æ‡§®",
          cropSugTitle: "üåæ ‡§™‡•Ä‡§ï ‡§∏‡•Ç‡§ö‡§®‡§æ",
          cropSugText: "‡§∏‡•Å‡§ö‡§µ‡§ø‡§≤‡•á‡§≤‡•á ‡§™‡•Ä‡§ï: ‡§Æ‡§ï‡§æ, ‡§ó‡§π‡•Ç, ‡§ú‡•ç‡§µ‡§æ‡§∞‡•Ä",
          chargingTitle: "üîã ‡§´‡•ç‡§∞‡•Ç‡§ü‡•Ä ‡§ö‡§æ‡§∞‡•ç‡§ú‡§ø‡§Ç‡§ó",
          chargingStatus: "‡§¨‡•Ö‡§ü‡§∞‡•Ä ‡•≠‡•´% ‡§µ‡§∞, ‡§ö‡§æ‡§∞‡•ç‡§ú‡§ø‡§Ç‡§ó",
          actionsTitle: "‚ö° ‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ",
          checkPestsBtn: "üêõ ‡§ï‡§ø‡§°‡•Ä ‡§§‡§™‡§æ‡§∏‡§æ",
          removeWeedsBtn: "üåø ‡§§‡•ç‡§Ø‡§æ‡§Ç‡§ö‡§æ ‡§ï‡§æ‡§¢‡§æ",
          testSoilBtn: "üß™ ‡§Æ‡§æ‡§§‡•Ä‡§ö‡•Ä ‡§ö‡§æ‡§ö‡§£‡•Ä",
          irrigateBtn: "üö∞ ‡§∏‡§ø‡§Ç‡§ö‡§® ‡§ï‡§∞‡§æ",
          alertsTitle: "üö® ‡§∏‡•Ç‡§ö‡§®‡§æ",
          snakeAlert: "üêç ‡§∏‡§æ‡§™ ‡§∂‡•ã‡§ß‡§≤‡§æ - ‡§â‡§§‡•ç‡§§‡§∞ ‡§™‡•ç‡§≤‡•â‡§ü",
          weedsAlert: "üåø ‡§Ö‡§ß‡§ø‡§ï ‡§ï‡§ø‡§°‡•Ä - ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞ ‡§¨‡•Ä",
          suggestionsTitle: "üå± ‡§∏‡•Ç‡§ö‡§®‡§æ",
          phAdvice: "‡§Æ‡§æ‡§§‡•Ä ‡§™‡•Ä‡§è‡§ö 6.4 - ‡§™‡•ã‡§ü‡§æ‡§∂ ‡§ñ‡§§ ‡§¶‡•ç‡§Ø‡§æ",
          footer: "FRUTY ‡§∂‡•á‡§§‡§ï‡§∞‡•Ä ‡§Ö‚Äç‡•Ö‡§™ ‚Ä¢ ‡§°‡•á‡§Æ‡•ã"
        },
        bn: {
          appName: "üå± FRUTY ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™",
          connectBtn: "üîó ‡¶°‡¶ø‡¶≠‡¶æ‡¶á‡¶∏ ‡¶∏‡¶Ç‡¶Ø‡ßã‡¶ú‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®",
          liveViewTitle: "ü§ñ ‡¶Æ‡¶æ‡¶†‡ßá‡¶∞ ‡¶∞‡ßã‡¶¨‡¶ü‡ßá‡¶∞ ‡¶¶‡ßÉ‡¶∂‡ßç‡¶Ø",
          robotLocation: "üìç ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶™‡ßç‡¶≤‡¶ü",
          fieldStatusTitle: "üåæ ‡¶Æ‡¶æ‡¶†‡ßá‡¶∞ ‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ",
          pestsTitle: "üåø ‡¶™‡ßã‡¶ï‡¶æ‡¶∞ ‡¶â‡¶™‡¶∏‡ßç‡¶•‡¶ø‡¶§‡¶ø",
          moistureTitle: "üíß ‡¶Ü‡¶∞‡ßç‡¶¶‡ßç‡¶∞‡¶§‡¶æ",
          phTitle: "‚öó ‡¶™‡¶ø‡¶è‡¶á‡¶ö ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞‡¶æ",
          nutrientsTitle: "üå± ‡¶™‡ßÅ‡¶∑‡ßç‡¶ü‡¶ø",
          pestsValue: "‡¶ï‡ßã‡¶®‡¶ì ‡¶®‡ßá‡¶á",
          nutrientsValue: "‡¶≠‡¶æ‡¶≤‡ßã",
          cropSugTitle: "üåæ ‡¶´‡¶∏‡¶≤‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡¶æ‡¶¨‡¶®‡¶æ",
          cropSugText: "‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡¶æ‡¶¨‡¶ø‡¶§: ‡¶Æ‡¶ï‡¶∞, ‡¶ó‡¶Æ, ‡¶¨‡¶æ‡¶∞‡ßç‡¶≤‡¶ø",
          chargingTitle: "üîã ‡¶´‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø ‡¶ö‡¶æ‡¶∞‡ßç‡¶ú‡¶ø‡¶Ç ‡¶Ö‡¶¨‡¶∏‡ßç‡¶•‡¶æ",
          chargingStatus: "‡¶¨‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∞‡¶ø ‡ß≠‡ß´% ‡¶ö‡¶æ‡¶∞‡ßç‡¶ú, ‡¶∏‡¶ö‡¶≤",
          actionsTitle: "‚ö° ‡¶ï‡¶∞‡ßç‡¶Æ‡¶∏‡¶Æ‡ßÇ‡¶π",
          checkPestsBtn: "üêõ ‡¶ï‡¶≤‡ßÅ‡¶∑‡¶§‡¶æ ‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®",
          removeWeedsBtn: "üåø ‡¶Ü‡¶ó‡¶æ‡¶õ‡¶æ ‡¶¶‡ßÇ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®",
          testSoilBtn: "üß™ ‡¶Æ‡¶æ‡¶ü‡¶ø ‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®",
          irrigateBtn: "üö∞ ‡¶∏‡ßá‡¶ö ‡¶¶‡¶ø‡¶®",
          alertsTitle: "üö® ‡¶∏‡¶§‡¶∞‡ßç‡¶ï‡¶§‡¶æ",
          snakeAlert: "üêç ‡¶∏‡¶æ‡¶™ ‡¶¶‡ßá‡¶ñ‡¶æ ‡¶ó‡ßá‡¶õ‡ßá - ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶™‡ßç‡¶≤‡¶ü",
          weedsAlert: "üåø ‡¶Ü‡¶ó‡¶æ‡¶õ‡¶æ ‡¶¨‡¶æ‡¶°‡¶º‡¶õ‡ßá - ‡¶ï‡ßç‡¶∑‡ßá‡¶§‡ßç‡¶∞ ‡¶¨‡¶ø",
          suggestionsTitle: "üå± ‡¶™‡¶∞‡¶æ‡¶Æ‡¶∞‡ßç‡¶∂",
          phAdvice: "‡¶Æ‡¶æ‡¶ü‡¶ø‡¶∞ ‡¶™‡¶ø‡¶è‡¶á‡¶ö 6.4 - ‡¶™‡¶ü‡¶æ‡¶∂ ‡¶∏‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®",
          footer: "FRUTY ‡¶ï‡ßÉ‡¶∑‡¶ï ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™ - ‡¶°‡ßá‡¶Æ‡ßã"
        },
        te: {
          appName: "üå± FRUTY ‡∞Ø‡∞æ‡∞™‡±ç",
          connectBtn: "üîó ‡∞°‡∞ø‡∞µ‡±à‡∞∏‡±ç ‡∞ï‡∞®‡±Ü‡∞ï‡±ç‡∞ü‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø",
          liveViewTitle: "ü§ñ ‡∞´‡±Ä‡∞≤‡±ç‡∞°‡±ç ‡∞∞‡±ã‡∞¨‡±ã‡∞ü‡±ç ‡∞µ‡±Ä‡∞ï‡±ç‡∞∑‡∞£",
          robotLocation: "üìç ‡∞â‡∞§‡±ç‡∞§‡∞∞ ‡∞™‡±ç‡∞≤‡∞æ‡∞ü‡±ç",
          fieldStatusTitle: "üåæ ‡∞´‡±Ä‡∞≤‡±ç‡∞°‡±ç ‡∞∏‡±ç‡∞•‡∞ø‡∞§‡∞ø",
          pestsTitle: "üåø ‡∞§‡±Ü‡∞ó‡±Å‡∞≥‡±ç‡∞≤‡±Å",
          moistureTitle: "üíß ‡∞§‡±á‡∞Æ",
          phTitle: "‚öó ‡∞™‡∞ø‡∞π‡±Ü‡∞ö‡±ç",
          nutrientsTitle: "üå± ‡∞™‡±ã‡∞∑‡∞ï‡∞æ‡∞≤‡±Å",
          pestsValue: "‡∞≤‡±á‡∞µ‡±Å",
          nutrientsValue: "‡∞Æ‡∞Ç‡∞ö‡∞ø‡∞¶‡∞ø",
          cropSugTitle: "üåæ ‡∞™‡∞Ç‡∞ü ‡∞∏‡±Ç‡∞ö‡∞®‡∞≤‡±Å",
          cropSugText: "‡∞∏‡∞ø‡∞´‡∞æ‡∞∞‡±ç‡∞∏‡±Å: ‡∞Æ‡∞ï‡±ç‡∞ï‡∞ú‡±ä‡∞®‡±ç‡∞®, ‡∞ó‡±ã‡∞ß‡±Å‡∞Æ, ‡∞¨‡∞æ‡∞∞‡±ç‡∞≤‡±Ä",
          chargingTitle: "üîã ‡∞´‡±ç‡∞∞‡±Ç‡∞ü‡±Ä ‡∞õ‡∞æ‡∞∞‡±ç‡∞ú‡∞ø‡∞Ç‡∞ó‡±ç ‡∞∏‡±ç‡∞•‡∞ø‡∞§‡∞ø",
          chargingStatus: "‡∞¨‡±ç‡∞Ø‡∞æ‡∞ü‡∞∞‡±Ä 75%, ‡∞õ‡∞æ‡∞∞‡±ç‡∞ú‡∞µ‡±Å‡∞§‡±ã‡∞Ç‡∞¶‡∞ø",
          actionsTitle: "‚ö° ‡∞ö‡∞∞‡±ç‡∞Ø‡∞≤‡±Å",
          checkPestsBtn: "üêõ ‡∞§‡±Ü‡∞ó‡±Å‡∞≥‡±ç‡∞≤‡±Å ‡∞§‡∞®‡∞ø‡∞ñ‡±Ä ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø",
          removeWeedsBtn: "üåø ‡∞Æ‡∞≤‡±ç‡∞≤‡±Ü‡∞≤‡±Å ‡∞§‡±ä‡∞≤‡∞ó‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø",
          testSoilBtn: "üß™ ‡∞®‡±á‡∞≤ ‡∞§‡∞®‡∞ø‡∞ñ‡±Ä",
          irrigateBtn: "üö∞ ‡∞∏‡∞æ‡∞ó‡±Å ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø",
          alertsTitle: "üö® ‡∞π‡±Ü‡∞ö‡±ç‡∞ö‡∞∞‡∞ø‡∞ï‡∞≤‡±Å",
          snakeAlert: "üêç ‡∞™‡∞æ‡∞Æ‡±Å ‡∞ó‡±Å‡∞∞‡±ç‡∞§‡∞ø‡∞Ç‡∞ö‡∞¨‡∞°‡∞ø‡∞Ç‡∞¶‡∞ø ‚Äî ‡∞â‡∞§‡±ç‡∞§‡∞∞ ‡∞™‡±ç‡∞≤‡∞æ‡∞ü‡±ç",
          weedsAlert: "üåø ‡∞Ö‡∞ß‡∞ø‡∞ï ‡∞Æ‡∞≤‡±ç‡∞≤‡±Ü‡∞≤‡±Å ‚Äî ‡∞´‡±Ä‡∞≤‡±ç‡∞°‡±ç B",
          suggestionsTitle: "üå± ‡∞∏‡±Ç‡∞ö‡∞®‡∞≤‡±Å",
          phAdvice: "‡∞Æ‡∞ü‡±ç‡∞ü‡∞ø‡∞≤‡±ã ‡∞™‡∞ø‡∞π‡±Ü‡∞ö‡±ç 6.4 ‚Äî ‡∞™‡±ä‡∞ü‡∞æ‡∞∑‡±ç ‡∞é‡∞∞‡±Å‡∞µ‡±Å‡∞®‡±Å ‡∞µ‡±á‡∞∏‡∞Ç‡∞°‡∞ø",
          footer: "FRUTY ‡∞∞‡±à‡∞§‡±Å ‡∞Ø‡∞æ‡∞™‡±ç ‚Ä¢ ‡∞°‡±Ü‡∞Æ‡±ã"
},
      };

      // Update all texts on UI
      const langSelect = document.getElementById('lang-select');
      if (langSelect) {
        langSelect.addEventListener('change', () => {
          updateTexts(langSelect.value);
          attachVoiceEvents(langSelect.value);
        });
      }
      function updateTexts(lang) {
        const texts = translations[lang] || translations['en'];
        for (const key in texts) {
          if (key === 'footer') {
            document.querySelector('footer').textContent = texts[key];
            continue;
          }
          const el = document.getElementById(key);
          if (el) el.textContent = texts[key];
        }
        // Buttons need special handling (checkPestsBtn, removeWeedsBtn, ‚Ä¶)
        ['connectBtn', 'checkPestsBtn', 'removeWeedsBtn', 'testSoilBtn', 'irrigateBtn'].forEach(id => {
          const el = document.getElementById(id);
          if (el && texts[id]) el.textContent = texts[id];
        });
      }
      function attachVoiceEvents(lang) {
        const langVoicesMap = {
          'en': 'en-US',
          'hi': 'hi-IN',
          'mr': 'mr-IN',
          'bn': 'bn-IN',
          'te': 'te-IN'
        };
        let langCode = langVoicesMap[lang] || 'en-US';
        const elements = ['appName', 'connectBtn', 'liveViewTitle', 'robot-location', 'fieldStatusTitle', 'pestsTitle', 'pestsValue', 'moistureTitle', 'moistureValue', 'phTitle', 'phValue', 'nutrientsTitle', 'nutrientsValue', 'cropSugTitle', 'cropSugText', 'chargingTitle', 'chargingStatus', 'actionsTitle', 'removeWeedsBtn', 'testSoilBtn', 'irrigateBtn', 'alertsTitle', 'snakeAlert', 'weedsAlert', 'phAdvice', 'footer'];
        elements.forEach(id => {
          let el = id === 'footer' ? document.querySelector('footer') : document.getElementById(id);
          if (!el) return;
          el.tabIndex = 0;
          el.style.cursor = 'pointer';
          el.onclick = () => speakText(el.textContent, langCode);
          el.onkeypress = (e) => {
            if (e.key === 'Enter' || e.key === ' ') {
              e.preventDefault();
              speakText(el.textContent, langCode);
            }
          }
        });
      }
      function speakText(text, langCode) {
        if (!text) return;
        if (window.speechSynthesis.speaking) window.speechSynthesis.cancel();
        let utterance = new SpeechSynthesisUtterance(text);
        utterance.lang = langCode;
        // Choose best voice available
        let voices = window.speechSynthesis.getVoices();
        let filtered = voices.filter(v => v.lang.toLowerCase().startsWith(langCode.toLowerCase()));
        // Priority voices with 'Google', 'Microsoft' etc.
        let preferred = ['google', 'microsoft', 'neural', 'zira', 'susan'];
        for (let p of preferred) {
          for (let v of filtered) {
            if (v.name.toLowerCase().includes(p)) {
              utterance.voice = v;
              break;
            }
          }
          if (utterance.voice) break;
        }
        if (!utterance.voice && filtered.length) utterance.voice = filtered[0];
        window.speechSynthesis.speak(utterance);
      }
      window.onload = () => {
        updateTexts(langSelect.value);
        attachVoiceEvents(langSelect.value);
        // Start blinking on weed alert
        let weedAlert = document.getElementById('weedsAlert');
        if (weedAlert) weedAlert.classList.add('blink');
      };
      document.getElementById("checkPestsBtn").onclick = async function(e) {
  e.stopPropagation();
  const response = await fetch('http://localhost:5000/check_pests');
  const data = await response.json();
  const pestsEl = document.getElementById('pestsValue');
  if (pestsEl) pestsEl.textContent = data.pest;

  // Remove old elements if present
  let imgId = 'detectedPestImage';
  let oldImg = document.getElementById(imgId);
  if (oldImg) oldImg.remove();
  let fertId = 'organicFertilizer';
  let oldFert = document.getElementById(fertId);
  if (oldFert) oldFert.remove();

  // Add pest image
  if (data.image) {
    let img = document.createElement('img');
    img.src = data.image;
    img.alt = "Pest Image";
    img.id = imgId;
    img.style = "width:180px;display:block;margin:10px auto 0;";
    pestsEl.parentNode.appendChild(img);
  }

  // Add fertilizer suggestion
  if (data.fertilizer) {
    let fertDiv = document.createElement('div');
    fertDiv.id = fertId;
    fertDiv.style = "margin-top:8px;font-size:15px;text-align:center;";
    fertDiv.innerHTML = '<strong>Organic Fertilizer Suggest:</strong> <span>' + data.fertilizer + '</span>';
    pestsEl.parentNode.appendChild(fertDiv);
  }
};
    </script>
</body>

</html>
